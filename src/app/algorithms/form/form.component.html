<div class="panel bg-light">
    <div class="panel-header text-center" *ngIf="!editing">
        <div class="panel-title h3">{{ algorithmData.abbreviation }}</div>
        <div class="panel-title" *ngIf="editing">
            <input type="text" class="form-input text-center" [(ngModel)]="algorithmData.abbreviation" placeholder="簡稱 ex. AV-SpNET">
        </div>
    </div>
    <div class="panel-body">
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">1. 完整 App 標題</div>
                <div class="tile-subtitle" *ngIf="!editing">{{ algorithmData.title }}</div>
                <div class="tile-subtitle" *ngIf="editing">
                    <input type="text" class="form-input" [(ngModel)]="algorithmData.title" placeholder="ex. Arousal Valence Speech Front-End Network">
                </div>
            </div>
        </div>
        <div class="tile tile-centered" *ngIf="editing">
            <div class="tile-content">
                <div class="tile-title text-bold">2. App 縮寫</div>
                <div class="tile-subtitle">
                    <input type="text" class="form-input" [(ngModel)]="algorithmData.abbreviation" placeholder="簡稱 ex. AV-SpNET">
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">3. 作者
                    <button class="btn btn-link btn-action" (click)="newAuthor()" *ngIf="editing">
              <i class="icon icon-plus"></i>
            </button></div>
                <div class="tile-subtitle">
                    <ng-container *ngFor="let author of deleteFilter(algorithmData.authors)">
                        <span class="chip" *ngIf="author.name.length">
                            <ng-container *ngIf="!editing">{{ author.name }}</ng-container>
                            <input class="chip-input" type="text" [(ngModel)]="author.name" placeholder="ex. Chih-Chuan Lu" *ngIf="editing">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                                (click)="deleteAuthor(author)"></a>
                        </span>
                    </ng-container>
                    <span class="chip" *ngIf="newAuthorInput && editing">
                        <form (submit)="newAuthorSubmit()">
                        <input class="chip-input" autofocus type="text" [(ngModel)]="newAuthorName"
                            [ngModelOptions]="{standalone: true}" #authorInput placeholder="ex. Chih-Chuan Lu">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                            (click)="newAuthorDiscard()"></a>
                        </form>
                    </span>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">4. 單位
                    <button class="btn btn-link btn-action" (click)="newUnit()" *ngIf="editing">
              <i class="icon icon-plus"></i>
            </button></div>
                <div class="tile-subtitle">
                    <ng-container *ngFor="let unit of algorithmData.units">
                        <span class="chip" *ngIf="unit.length">
                            <ng-container *ngIf="!editing">{{ unit }}</ng-container>
                            <input class="chip-input" type="text" [(ngModel)]="unit" placeholder="ex. 台灣大學資工系" *ngIf="editing">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                                (click)="deleteUnit(unit)"></a>
                        </span>
                    </ng-container>
                    <span class="chip" *ngIf="newUnitInput && editing">
                        <form (submit)="newUnitSubmit()">
                        <input class="chip-input" autofocus type="text" [(ngModel)]="newUnitName"
                            [ngModelOptions]="{standalone: true}" #unitInput placeholder="ex. 台灣大學資工系">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                            (click)="newUnitDiscard()"></a>
                        </form>
                    </span>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">5. 問題回報聯絡 Email</div>
                <div class="tile-subtitle" *ngIf="!editing">{{ algorithmData.email }}</div>
                <div class="tile-subtitle" *ngIf="editing">
                    <input type="text" class="form-input" [(ngModel)]="algorithmData.email" placeholder="ex. SER">
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">6. 功能描述</div>
                <div markdown class="tile-subtitle" *ngIf="!editing" [data]="algorithmData.description"></div>
                <div class="tile-subtitle">
                    <textarea class="form-input" *ngIf="editing" [(ngModel)]="algorithmData.description" placeholder="Speech Emotion Recognition (SER) across diverse application domains is still challenging due to the …" rows="4"></textarea>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">7. Keyword
                    <button class="btn btn-link btn-action" (click)="newTag()" *ngIf="editing">
              <i class="icon icon-plus"></i>
            </button></div>
                <div class="tile-subtitle">
                    <span class="chip" *ngFor="let tag of deleteFilter(algorithmData.tags)">
            {{ tag.tag }}
            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
              (click)="deleteTag(tag)"></a>
          </span>
                    <span class="chip" *ngIf="newTagInput && editing">
            <form (submit)="newTagSubmit()">
              <input class="chip-input" autofocus type="text" [(ngModel)]="newTagName"
                [ngModelOptions]="{standalone: true}" #tagInput placeholder="ex. Speech Emotion Recognition">
                <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                  (click)="newTagDiscard()"></a>
            </form>
          </span>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">8. Neural Network 類別
                    <button class="btn btn-link btn-action" (click)="newCategory()" *ngIf="editing">
              <i class="icon icon-plus"></i>
            </button></div>
                <div class="tile-subtitle">
                    <ng-container *ngFor="let category of algorithmData.categories">
                        <span class="chip" *ngIf="category.length">
                            <ng-container *ngIf="!editing">{{ category }}</ng-container>
                            <input class="chip-input" type="text" [(ngModel)]="category" placeholder="ex. 台灣大學資工系" *ngIf="editing">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                                (click)="deleteCategory(category)"></a>
                        </span>
                    </ng-container>
                    <span class="chip" *ngIf="newCategoryInput && editing">
                        <form (submit)="newCategorySubmit()">
                        <input class="chip-input" autofocus type="text" [(ngModel)]="newCategoryName"
                            [ngModelOptions]="{standalone: true}" #categoryInput placeholder="ex. 台灣大學資工系">
                            <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing"
                            (click)="newCategoryDiscard()"></a>
                        </form>
                    </span>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">9. 參考連結 URL/GitHub</div>
                <ng-container *ngFor="let link of deleteFilter(algorithmData.links)">
                    <div class="tile-subtitle" *ngIf="!editing">{{ link.link }}</div>
                    <div class="tile-subtitle" *ngIf="editing">
                        <input type="text" class="form-input" [(ngModel)]="link.link" style="width: calc(100% - 22px);display: inline;">
                        <a aria-label="close" role="button" class="btn btn-clear" *ngIf="editing" (click)="link.delete = true" style="display: inline;"></a>
                    </div>
                </ng-container>
                <div class="tile-subtitle " *ngIf="editing ">
                    <button class="btn btn-link btn-action " (click)="algorithmData.links.push({id: -1, link: ''}) ">新增</button>
                </div>
            </div>
        </div>
        <div class="tile tile-centered ">
            <div class="tile-content ">
                <div class="tile-title text-bold ">10. 程式會使用到的資料集</div>
                <div class="tile-content ">
                    <div class="card my-2" *ngFor="let dataset of deleteFilter(algorithmData.datasets)">
                        <div class="card-body" *ngIf="!editing">
                            <p>名稱：{{ dataset.name }}</p>
                            <p>連結：{{ dataset.link }}</p>
                            <span>描述：</span>
                            <markdown [data]="dataset.description"></markdown>
                            <p>授權：{{ dataset.license }}</p>
                        </div>
                        <div class="card-body" *ngIf="editing">
                            <p>名稱：<input type="text" class="form-input " [(ngModel)]="dataset.name"></p>
                            <p>連結：<input type="text" class="form-input " [(ngModel)]="dataset.link"></p>
                            <span>描述：</span>
                            <textarea class="form-input " placeholder="可使用 Markdown " [(ngModel)]="dataset.description" rows="4"></textarea>
                            <p>授權：<input type="text" class="form-input " [(ngModel)]="dataset.license"></p>
                        </div>
                        <div class="card-footer" *ngIf="editing">
                            <button class="btn btn-error" (click)="dataset.delete = true">刪除</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tile tile-centered ">
            <div class="tile-content ">
                <div class="tile-title text-bold ">11. 可供程式 (App) 選擇的參數</div>
                <div class="tile-content ">
                    <table class="table table-striped table-hover ">
                        <thead>
                            <tr>
                                <th>名稱</th>
                                <th>變數</th>
                                <th style="width: 60%; ">說明</th>
                                <th *ngIf="editing ">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let parameter of deleteFilter(algorithmData.parameters)">
                                <td *ngIf="!editing">{{ parameter.label }}</td>
                                <td *ngIf="editing"><input type="text" class="form-input" [(ngModel)]="parameter.label"></td>
                                <td *ngIf="!editing">{{ parameter.variable }}</td>
                                <td *ngIf="editing"><input type="text" class="form-input" [(ngModel)]="parameter.variable"></td>
                                <td *ngIf="!editing">
                                    <markdown [data]="parameter.description"></markdown>
                                </td>
                                <td *ngIf="editing"><textarea class="form-input " placeholder="可使用 Markdown " [(ngModel)]="parameter.description"></textarea></td>
                                <td *ngIf="editing ">
                                    <button class="btn btn-sm btn-error " (click)="parameter.delete =  true"><i class="icon icon-delete "></i></button>
                                </td>
                            </tr>
                            <tr *ngIf="editing ">
                                <td><input type="text " class="form-input " placeholder="--demo=_VAR_" [(ngModel)]="newParameter.label"></td>
                                <td><input type="text " class="form-input " placeholder="" [(ngModel)]="newParameter.variable"></td>
                                <td><textarea class="form-input " placeholder="可使用 Markdown " [(ngModel)]="newParameter.description"></textarea></td>
                                <td><button class="btn btn-sm btn-success " (click)="newParameterSubmit()"><i class="icon icon-check "></i></button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">12. 程式 (App) 輸入格式（image, text, speech or ...)</div>
                <div class="tile-subtitle" *ngIf="!editing"><code>{{ algorithmData.input_type }}</code></div>
                <div class="tile-subtitle" *ngIf="editing">
                    <input type="text" class="form-input" [(ngModel)]="algorithmData.input_type" placeholder="ex. audio/*">
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">13. 程式 (App) 輸出格式（image, text, speech or ...)</div>
                <div class="tile-subtitle" *ngIf="!editing"><code>{{ algorithmData.output_type }}</code></div>
                <div class="tile-subtitle" *ngIf="editing">
                    <input type="text" class="form-input" [(ngModel)]="algorithmData.output_type" placeholder="ex. text/json">
                </div>
            </div>
        </div>
        <div class="tile tile-centered">
            <div class="tile-content">
                <div class="tile-title text-bold">識別碼</div>
                <div class="tile-subtitle">{{ algorithmData.remote_secret }}</div>
            </div>
        </div>
    </div>
</div>